<!DOCTYPE html>

<html>
  <head>

    <title> Forms </title>

</head>
<body>
<script type = "text/javascript">
  //init, set up db

function init(){
   var http = new XMLHttpRequest();
   var url = '/init';
   http.open('GET', url, true);
   http.send();
};
  var start_time = 0;
function savedata(){
   var http = new XMLHttpRequest();
   var url = '/addPost';
   start_time = Date.now();
   var params = 'topic=' + document.getElementById("book").value + '&data=' + document.getElementById("comment").value;

   alert(params);

   http.open('POST', url, true);

   http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');

   http.onreadystatechange = function()
   {
       if(http.readyState == 4 && http.status == 200){
             
     document.getElementById("answer").value = http.responseText;    
       }
   };
   

   var time = Date.now();


   console.log("Response time: " + (time - start_time) + "ms");
   http.send(params);
   //document.getElementById("book").value = "";
   //document.getElementById("comment").value = "";
   

};

function getdata(){

   var http = new XMLHttpRequest();
   var url = '/getPosts';
   
   http.open('GET', url, true);
 
   http.onreadystatechange = function()
   {
       if(http.readyState == 4 && http.status == 200){
     document.getElementById("answer").innerHTML = http.responseText;    
       }
   };

   http.send();

   setTimeout(getdata, 10000);

};
init();
getdata();

</script>
 
   </head>

      


     

  <label for="book"> Topic:</label><br> <br>
  <input id="book" type="text" name="book">
  <br>
  <label for="comment"> Write Post:</label>
  <br> 
  <br>
  <textarea id="comment" name="comment"></textarea>
  <br>
<br>

  <button  onclick="savedata()"> Send Post </button>
  <button  onclick="getdata()"> Get Posts </button>
  <br>
  <br>

<div id="answer">   </div>
 
</body>

</html>

